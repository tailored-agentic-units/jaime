@layer layout {

  /* === Page structure === */

  body {
    max-width: var(--content-width);
    margin-inline: auto;
    padding-inline: var(--page-padding);
  }

  body > header {
    padding-block: var(--space-4);
  }

  body > main {
    padding-block: var(--space-4);
  }

  body > footer {
    padding-block: var(--space-4);
  }

  /* === Vertical rhythm â€” block spacing === */

  /* Paragraphs, lists, tables, blockquotes: base spacing between siblings */
  p + p,
  p + ul, p + ol,
  ul + p, ol + p,
  p + blockquote, blockquote + p,
  p + table, table + p,
  ul + ul, ol + ol,
  blockquote + blockquote {
    margin-block-start: var(--space-4);
  }

  /* Headings: more space above (separation), tight below (coupling) */
  h1 { margin-block: var(--space-3); }
  h2 { margin-block: var(--space-6) var(--space-3); }
  h3 { margin-block: var(--space-5) var(--space-3); }
  h4 { margin-block: var(--space-4) var(--space-3); }

  /* First heading after a separator needs less top space */
  hr + h2 { margin-block-start: var(--space-5); }

  /* Code blocks: base spacing */
  pre {
    margin-block: var(--space-4);
  }

  /* Images and video */
  img,
  video {
    margin-block: var(--space-4);
  }

  /* Section dividers */
  hr {
    margin-block: var(--space-6);
  }

  /* Blockquotes */
  blockquote {
    margin-block: var(--space-4);
    padding-inline-start: var(--space-4);
  }

  /* Lists */
  ul, ol {
    margin-block: var(--space-4);
    padding-inline-start: var(--space-5);
  }

  /* Nested lists: tighter */
  li > ul, li > ol {
    margin-block: var(--space-3);
  }

  /* List item spacing */
  li + li {
    margin-block-start: var(--space-3);
  }

  /* Tables */
  table {
    margin-block: var(--space-4);
    width: 100%;
  }

  th, td {
    padding: var(--space-3);
  }

  /* === Inline spacing === */

  code {
    padding-inline: var(--space-2);
  }

  pre code {
    padding: var(--space-2);
    display: block;
  }

  /* Highlight wrapper */
  .highlight {
    margin-block: var(--space-4);
  }

  .highlight pre {
    margin-block: 0;
    padding: var(--space-4);
    overflow-x: auto;
  }

  /* === Responsive === */

  @media (max-width: 48rem) {
    body {
      padding-inline: var(--space-4);
    }
  }

  @media (min-width: 80rem) {
    body {
      padding-inline: 0;
    }
  }
}
